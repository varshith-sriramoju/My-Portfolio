<!-- html -->
<!-- Header fragment -->
<th:block th:fragment="site-header">
    <header class="header">
        <div class="container header-container">
            <div class="logo">V <span>S</span></div>

            <nav id="site-nav" class="nav" role="navigation" aria-label="Primary">
                <div class="nav-links">
                    <a href="#about" class="nav-link">About</a>
                    <a href="#projects" class="nav-link">Projects</a>
                    <a href="#experience" class="nav-link">Experience</a>
                    <a href="#achievements" class="nav-link">Achievements</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </div>
            </nav>

            <!-- Open the static resume viewer page (/resume.html) for Netlify -->
            <a class="btn btn-primary" href="/resume.html" rel="noopener" aria-label="Open resume viewer">
                Resume
            </a>

            <button
                class="mobile-menu-btn"
                aria-label="Open navigation menu"
                aria-controls="site-nav"
                aria-expanded="false"
                type="button">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>
        </div>
    </header>

    <script>
        (function () {
            const btn = document.querySelector('.mobile-menu-btn');
            const nav = document.getElementById('site-nav');

            if (!btn || !nav) return;

            function openMenu() {
                nav.classList.add('is-open');
                document.body.classList.add('menu-open');
                btn.setAttribute('aria-expanded', 'true');
                btn.setAttribute('aria-label', 'Close navigation menu');
            }

            function closeMenu() {
                nav.classList.remove('is-open');
                document.body.classList.remove('menu-open');
                btn.setAttribute('aria-expanded', 'false');
                btn.setAttribute('aria-label', 'Open navigation menu');
            }

            function toggleMenu() {
                const isOpen = nav.classList.contains('is-open');
                isOpen ? closeMenu() : openMenu();
            }

            btn.addEventListener('click', toggleMenu);

            // Close on link click (use event delegation)
            nav.addEventListener('click', (e) => {
                const link = e.target.closest('a');
                if (link) closeMenu();
            });

            // Close on ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeMenu();
            });

            // Close when clicking outside the panel
            document.addEventListener('click', (e) => {
                if (!nav.classList.contains('is-open')) return;
                const isClickInsideNav = nav.contains(e.target);
                const isClickOnButton = btn.contains(e.target);
                if (!isClickInsideNav && !isClickOnButton) closeMenu();
            });
        })();
    </script>
</th:block>
